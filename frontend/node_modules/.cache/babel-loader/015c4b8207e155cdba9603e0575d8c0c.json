{"ast":null,"code":"import _slicedToArray from\"/Users/robertpage/Documents/Programming/Projects/sarah_portfolio_site/Production/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import React,{useState,useEffect}from'react';import{Link}from'react-router-dom';import'./OtherWorkCards.css';function OtherWorkCards(props){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),currentProjectID=_useState2[0],setCurrentProjectID=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),pages=_useState4[0],setPages=_useState4[1];var _useState5=useState(true),_useState6=_slicedToArray(_useState5,2),cardsIsLoading=_useState6[0],setCardsIsLoading=_useState6[1];useEffect(function(){// setCardsIsLoading(true)\n// fetchCurrentProjectID();\n// fetchPages();\nvar isMounted=true;fetch(\"https://sarah-ryder-backend.herokuapp.com/api/v2/pages/?slug=\".concat(props.project)).then(function(response){if(isMounted)response.json();}).then(function(json){if(isMounted)setCurrentProjectID(json.items[0].id);}).catch(function(){console.log(\"Error: Failed to fetch data from API\");});fetch('https://sarah-ryder-backend.herokuapp.com/api/v2/pages/?type=portfolio.Project&fields=client,card_image,card_description').then(function(response){if(isMounted)response.json();}).then(function(json){if(isMounted)setPages(json.items);});setCardsIsLoading(false);return function(){isMounted=false;};},[props]);// function fetchCurrentProjectID() {\n//     fetch(`https://sarah-ryder-backend.herokuapp.com/api/v2/pages/?slug=${props.project}`)\n//     .then(response => response.json())\n//     .then(json => setCurrentProjectID(json.items[0].id))\n//     .catch(function() {\n//         console.log(\"Error: Failed to fetch data from API\")\n//     })\n// }\n// function fetchPages() {\n//     fetch('https://sarah-ryder-backend.herokuapp.com/api/v2/pages/?type=portfolio.Project&fields=client,card_image,card_description')\n//     .then(response => response.json())\n//     .then(json => setPages(json.items))\n// }\nif(!cardsIsLoading&&pages){return/*#__PURE__*/_jsx(\"div\",{className:\"card-holder\",children:pages.map(function(page,index){if(page.id!==currentProjectID){return/*#__PURE__*/_jsxs(Link,{to:\"/\"+page.meta.slug,className:\"project-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-image\",children:/*#__PURE__*/_jsx(\"img\",{src:'https://sarah-ryder-backend.s3-us-west-2.amazonaws.com/original_images/'+page.card_image.title,alt:page.card_description})}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-text\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"detail-page-card-client\",children:page.client}),/*#__PURE__*/_jsx(\"p\",{className:\"detail-page-card-description\",children:page.card_description})]})]},index);}})});}else return/*#__PURE__*/_jsx(\"div\",{});}export default OtherWorkCards;","map":{"version":3,"sources":["/Users/robertpage/Documents/Programming/Projects/sarah_portfolio_site/Production/frontend/src/components/ProjectDetail/components/OtherWorkCards.js"],"names":["React","useState","useEffect","Link","OtherWorkCards","props","currentProjectID","setCurrentProjectID","pages","setPages","cardsIsLoading","setCardsIsLoading","isMounted","fetch","project","then","response","json","items","id","catch","console","log","map","page","index","meta","slug","card_image","title","card_description","client"],"mappings":"wSAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,OAASC,IAAT,KAAqB,kBAArB,CACA,MAAO,sBAAP,CAEA,QAASC,CAAAA,cAAT,CAAwBC,KAAxB,CAA+B,eACqBJ,QAAQ,CAAC,IAAD,CAD7B,wCACpBK,gBADoB,eACFC,mBADE,8BAEDN,QAAQ,CAAC,IAAD,CAFP,yCAEpBO,KAFoB,eAEbC,QAFa,8BAGiBR,QAAQ,CAAC,IAAD,CAHzB,yCAGpBS,cAHoB,eAGJC,iBAHI,eAK3BT,SAAS,CAAC,UAAM,CACZ;AACA;AACA;AACA,GAAIU,CAAAA,SAAS,CAAG,IAAhB,CAEAC,KAAK,wEAAiER,KAAK,CAACS,OAAvE,EAAL,CACCC,IADD,CACM,SAAAC,QAAQ,CAAI,CACd,GAAIJ,SAAJ,CAAeI,QAAQ,CAACC,IAAT,GAClB,CAHD,EAICF,IAJD,CAIM,SAAAE,IAAI,CAAI,CACV,GAAIL,SAAJ,CAAeL,mBAAmB,CAACU,IAAI,CAACC,KAAL,CAAW,CAAX,EAAcC,EAAf,CAAnB,CAClB,CAND,EAOCC,KAPD,CAOO,UAAW,CACdC,OAAO,CAACC,GAAR,CAAY,sCAAZ,EACH,CATD,EAWAT,KAAK,CAAC,0HAAD,CAAL,CACCE,IADD,CACM,SAAAC,QAAQ,CAAI,CACd,GAAIJ,SAAJ,CAAeI,QAAQ,CAACC,IAAT,GAClB,CAHD,EAICF,IAJD,CAIM,SAAAE,IAAI,CAAI,CACV,GAAIL,SAAJ,CAAeH,QAAQ,CAACQ,IAAI,CAACC,KAAN,CAAR,CAClB,CAND,EAOAP,iBAAiB,CAAC,KAAD,CAAjB,CACA,MAAO,WAAM,CAAEC,SAAS,CAAG,KAAZ,CAAmB,CAAlC,CACD,CA1BM,CA0BJ,CAACP,KAAD,CA1BI,CAAT,CA4BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA,GAAI,CAACK,cAAD,EAAmBF,KAAvB,CAA8B,CAC1B,mBACI,YAAK,SAAS,CAAC,aAAf,UACKA,KAAK,CAACe,GAAN,CAAU,SAACC,IAAD,CAAOC,KAAP,CAAiB,CACxB,GAAID,IAAI,CAACL,EAAL,GAAYb,gBAAhB,CAAkC,CAC9B,mBACI,MAAC,IAAD,EAAM,EAAE,CAAE,IAAMkB,IAAI,CAACE,IAAL,CAAUC,IAA1B,CAA4C,SAAS,CAAC,cAAtD,wBACI,YAAK,SAAS,CAAC,YAAf,uBACI,YACI,GAAG,CAAE,0EAA4EH,IAAI,CAACI,UAAL,CAAgBC,KADrG,CAEI,GAAG,CAAEL,IAAI,CAACM,gBAFd,EADJ,EADJ,cAOI,aAAK,SAAS,CAAC,WAAf,wBACI,UAAG,SAAS,CAAC,yBAAb,UAAwCN,IAAI,CAACO,MAA7C,EADJ,cAEI,UAAG,SAAS,CAAC,8BAAb,UAA6CP,IAAI,CAACM,gBAAlD,EAFJ,GAPJ,GAAqCL,KAArC,CADJ,CAcH,CACJ,CAjBA,CADL,EADJ,CAuBH,CAxBD,IAwBO,oBACH,cADG,CAIV,CAED,cAAerB,CAAAA,cAAf","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Link } from 'react-router-dom';\nimport './OtherWorkCards.css';\n\nfunction OtherWorkCards(props) {\n    const [currentProjectID, setCurrentProjectID] = useState(null)\n    const [pages, setPages] = useState(null)\n    const [cardsIsLoading, setCardsIsLoading] = useState(true)\n    \n    useEffect(() => {\n        // setCardsIsLoading(true)\n        // fetchCurrentProjectID();\n        // fetchPages();\n        let isMounted = true\n\n        fetch(`https://sarah-ryder-backend.herokuapp.com/api/v2/pages/?slug=${props.project}`)\n        .then(response => {\n            if (isMounted) response.json()\n        })\n        .then(json => {\n            if (isMounted) setCurrentProjectID(json.items[0].id)\n        })\n        .catch(function() {\n            console.log(\"Error: Failed to fetch data from API\")\n        })\n\n        fetch('https://sarah-ryder-backend.herokuapp.com/api/v2/pages/?type=portfolio.Project&fields=client,card_image,card_description')\n        .then(response => {\n            if (isMounted) response.json()\n        })\n        .then(json => {\n            if (isMounted) setPages(json.items)\n        })\n        setCardsIsLoading(false)\n        return () => { isMounted = false }\n      }, [props]);\n      \n    // function fetchCurrentProjectID() {\n    //     fetch(`https://sarah-ryder-backend.herokuapp.com/api/v2/pages/?slug=${props.project}`)\n    //     .then(response => response.json())\n    //     .then(json => setCurrentProjectID(json.items[0].id))\n    //     .catch(function() {\n    //         console.log(\"Error: Failed to fetch data from API\")\n    //     })\n    // }\n      \n    // function fetchPages() {\n    //     fetch('https://sarah-ryder-backend.herokuapp.com/api/v2/pages/?type=portfolio.Project&fields=client,card_image,card_description')\n    //     .then(response => response.json())\n    //     .then(json => setPages(json.items))\n    // }\n\n    if (!cardsIsLoading && pages) {\n        return(\n            <div className=\"card-holder\">\n                {pages.map((page, index) => {\n                    if (page.id !== currentProjectID) {\n                        return (\n                            <Link to={\"/\" + page.meta.slug} key={index} className=\"project-card\" >\n                                <div className=\"card-image\">\n                                    <img\n                                        src={'https://sarah-ryder-backend.s3-us-west-2.amazonaws.com/original_images/' + page.card_image.title}\n                                        alt={page.card_description}\n                                    />\n                                </div>\n                                <div className=\"card-text\">\n                                    <p className=\"detail-page-card-client\">{page.client}</p>\n                                    <p className=\"detail-page-card-description\">{page.card_description}</p>\n                                </div>\n                            </Link>\n                        )\n                    }\n                }\n                )}\n            </div>\n        )\n    } else return (\n        <div/>\n    )\n    \n}\n\nexport default OtherWorkCards;"]},"metadata":{},"sourceType":"module"}