{"ast":null,"code":"import _slicedToArray from\"/Users/robertpage/Documents/Programming/Projects/sarah_portfolio_site/Production/sarah-ryder/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import React,{useState,useEffect,useRef}from'react';import{useHistory}from'react-router-dom';import'./ProjectDetail.css';import BalanceText from'react-balance-text';import ProjectDetailSlider from'./components/ProjectDetailSlider';import OtherWorkCards from'./components/OtherWorkCards';function ProjectDetail(_ref){var match=_ref.match,location=_ref.location;var project=match.params.project;var history=useHistory();var _useState=useState([]),_useState2=_slicedToArray(_useState,2),projectData=_useState2[0],setProjectData=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),isLoading=_useState4[0],setIsLoading=_useState4[1];var childRef=useRef();useEffect(function(){setIsLoading(true);fetchProject();scrollToTop();setIsLoading(false);},[project]);function scrollToTop(){if(window.pageYOffset){window.scrollTo({top:0,left:0,behavior:'smooth'});}}function fetchProject(){var id=[];fetch(\"https://sarah-ryder-backend.herokuapp.com/api/v2/pages/?slug=\".concat(project)).then(function(response){return response.json();}).then(function(json){id=json.items[0].id;fetch(\"https://sarah-ryder-backend.herokuapp.com/api/v2/pages/\".concat(id)).then(function(response){return response.json();}).then(function(json){return setProjectData(json);});}).catch(function(){console.log(\"Error: Failed to fetch data from API\");history.push('/');});}function handleLeftClick(e){try{childRef.current.handleLeftClick(e);}catch(err){console.log(err);}}function handleRightClick(e){try{childRef.current.handleRightClick(e);}catch(err){console.log(err);}}if(!isLoading){return/*#__PURE__*/_jsxs(\"div\",{className:\"project-detail\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"project-detail-left\",onClick:handleLeftClick}),/*#__PURE__*/_jsx(\"div\",{className:\"project-detail-right\",onClick:handleRightClick}),/*#__PURE__*/_jsxs(\"div\",{className:\"project-detail-flex-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"project-detail-image-and-description-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"project-slider-flex-container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"project-slider-container\",children:/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(ProjectDetailSlider,{mediaGallery:projectData.media_gallery,ref:childRef})})})}),/*#__PURE__*/_jsx(\"div\",{className:\"project-info\",children:/*#__PURE__*/_jsx(BalanceText,{children:projectData.full_description})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"project-credits\",children:/*#__PURE__*/_jsx(\"span\",{dangerouslySetInnerHTML:{__html:projectData.project_credits}})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"other-work-container\",children:/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(OtherWorkCards,{project:project,isLoading:isLoading,setIsLoading:setIsLoading})})}),/*#__PURE__*/_jsx(\"div\",{className:\"copyright-container\",children:/*#__PURE__*/_jsxs(\"p\",{children:[\"\\xA9 \",new Date().getFullYear()]})})]});}else{return/*#__PURE__*/_jsx(\"div\",{});}}export default ProjectDetail;","map":{"version":3,"sources":["/Users/robertpage/Documents/Programming/Projects/sarah_portfolio_site/Production/sarah-ryder/src/components/ProjectDetail/ProjectDetail.js"],"names":["React","useState","useEffect","useRef","useHistory","BalanceText","ProjectDetailSlider","OtherWorkCards","ProjectDetail","match","location","project","params","history","projectData","setProjectData","isLoading","setIsLoading","childRef","fetchProject","scrollToTop","window","pageYOffset","scrollTo","top","left","behavior","id","fetch","then","response","json","items","catch","console","log","push","handleLeftClick","e","current","err","handleRightClick","media_gallery","full_description","__html","project_credits","Date","getFullYear"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport './ProjectDetail.css';\nimport BalanceText from 'react-balance-text';\nimport ProjectDetailSlider from './components/ProjectDetailSlider'\nimport OtherWorkCards from './components/OtherWorkCards'\n\nfunction ProjectDetail({ match, location }) {\n    const {\n        params: { project },\n    } = match;\n    const history = useHistory();\n    const [projectData, setProjectData] = useState([])\n    const [isLoading, setIsLoading] = useState(true)\n    const childRef = useRef();\n\n    useEffect(() => {\n        setIsLoading(true);\n        fetchProject();\n        scrollToTop();\n        setIsLoading(false);\n    }, [project])\n\n    function scrollToTop() {\n        if (window.pageYOffset){\n            window.scrollTo({\n                top: 0,\n                left: 0,\n                behavior: 'smooth'\n              });\n        }\n    }\n\n    function fetchProject() {\n        let id = []\n        fetch(`https://sarah-ryder-backend.herokuapp.com/api/v2/pages/?slug=${project}`)\n        .then(response => response.json())\n        .then(json => {\n            id = json.items[0].id\n            fetch(`https://sarah-ryder-backend.herokuapp.com/api/v2/pages/${id}`)\n                .then(response => response.json())\n                .then(json => setProjectData(json))\n        })\n        .catch(function() {\n            console.log(\"Error: Failed to fetch data from API\")\n            history.push('/')\n        })\n    }\n\n    function handleLeftClick(e) {\n        try {\n            childRef.current.handleLeftClick(e);\n        }\n        catch(err) {\n            console.log(err)\n        }\n      }\n\n    function handleRightClick(e) {\n        try {\n            childRef.current.handleRightClick(e)\n        }\n        catch(err) {\n            console.log(err)\n        }\n      }\n\n    if (!isLoading) {\n        return (\n            <div className=\"project-detail\">\n                <div className=\"project-detail-left\" onClick={handleLeftClick}/>\n                <div className=\"project-detail-right\" onClick={handleRightClick}/>\n                <div className=\"project-detail-flex-container\">\n                    <div className=\"project-detail-image-and-description-container\">\n                        <div className=\"project-slider-flex-container\">\n                            <div className=\"project-slider-container\">\n                                    <div>\n                                        <ProjectDetailSlider mediaGallery={projectData.media_gallery} ref={childRef}/>\n                                    </div>\n                            </div>\n                        </div>\n                        <div className=\"project-info\">\n                            <BalanceText>\n                                {projectData.full_description}\n                            </BalanceText>\n                        </div>\n                    </div>\n                    <div className=\"project-credits\">\n                        <span dangerouslySetInnerHTML={{__html:projectData.project_credits}}/>\n                    </div>\n                </div>\n                <div className=\"other-work-container\">\n                    <div>\n                        <OtherWorkCards project={project} isLoading={isLoading} setIsLoading={setIsLoading}/>\n                    </div>\n                </div>\n                <div className=\"copyright-container\">\n                    <p>&#169; {new Date().getFullYear()}</p>\n                </div>\n            </div>\n        )\n    } else {\n        return (<div/>)\n    }\n\n}\n  \n  export default ProjectDetail;"]},"metadata":{},"sourceType":"module"}